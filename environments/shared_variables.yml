---

# Ansible Specific Vars
ansible_ssh_user: core
ansible_python_interpreter: /home/core/pypy/bin/pypy

ALLIANCE_RELEASE: "{{ lookup('env','ALLIANCE_RELEASE') }}"
DOCKER_IMAGE_TAG: "{{ lookup('env','DOCKER_IMAGE_TAG') | default(env,True) }}"
REGISTRY: 100225593120.dkr.ecr.us-east-1.amazonaws.com

# Env Image names
NEO_ENV_NAME: agr_neo4j_env
ES_ENV_NAME: agr_elasticsearch_env
KIBANA_ENV_NAME: agr_kibana_env
INFINISPAN_ENV_NAME: agr_infinispan_env
INTERMINE_BUILDER_ENV_NAME: agr_intermine_builder_env
INTERMINE_POSTGRES_ENV_NAME: "intermine/postgres"
INTERMINE_SOLR_ENV_NAME: "intermine/solr"
INTERMINE_TOMCAT_ENV_NAME: "intermine/tomcat"

# Data Image names
NEO_DATA_IMAGE_NAME: agr_neo4j_data_image
INFINISPAN_DATA_IMAGE_NAME: agr_infinispan_data_image

# Runable image names
QC_IMAGE_NAME: agr_qc_run
LOADER_IMAGE_NAME: agr_loader_run
PREPROCESS_IMAGE_NAME: agr_preprocess_run
JAVA_SOFTWARE_IMAGE_NAME: agr_java_software
FILEGENER_IMAGE_NAME: agr_file_generator_run
JBROWSE_IMAGE_NAME: agr_jbrowse_run
APOLLO_IMAGE_NAME: agr_apollo_run

INTERMINE_POSTGRES_NAME: agr_intermine_postgres_server
INTERMINE_SOLR_NAME: agr_intermine_solr_server
INTERMINE_TOMCAT_NAME: agr_intermine_tomcat_server

# Server Image names
UI_IMAGE_NAME: agr_ui_server

# Server Names
UI_SERVER_NAME: "agr.{{ env }}.ui.server"
JBROWSE_SERVER_NAME: "agr.{{ env }}.jbrowse.server"
APOLLO_SERVER_NAME: "agr.{{ env }}.apollo.server"
API_SERVER_NAME: "agr.{{ env }}.api.server"
NEO_SERVER_NAME: "agr.{{ env }}.neo4j.server"
INFINISPAN_SERVER_NAME: "agr.{{ env }}.infinispan.server"
LOGSTASH_SERVER_ADDRESS: "udp://logs.alliancegenome.internal:12201"
#LOGSTASH_SERVER_ADDRESS: "udp://agr.{{ env }}.log.server:12201"
INTERMINE_POSTGRES_SERVER_NAME: "agr.{{ env }}.intermine.postgres.server"
INTERMINE_SOLR_SERVER_NAME: "agr.{{ env }}.intermine.solr.server"
INTERMINE_TOMCAT_SERVER_NAME: "agr.{{ env }}.intermine.tomcat.server"

#Elk Servers
ES_SERVER_NAME: "agr.{{ env }}.elasticsearch.server"
LOG_SERVER_NAME: "agr.{{ env }}.log.server" # Logging runs outside the docker network
KIBANA_SERVER_NAME: "agr.{{ env }}.kibana.server"

LOG_SERVER_ADDRESS: "udp://{{ LOG_SERVER_HOST }}:12201"

# Testing Vars
API_TESTING_SERVER_NAME: "build.alliancegenome.internal"
NEO_TESTING_SERVER_NAME: "build.alliancegenome.internal"
ES_TESTING_SERVER_NAME: "build.alliancegenome.internal"
CACHE_TESTING_SERVER_NAME: "build.alliancegenome.internal"

# Running Names
QC_RUN_NAME: "agr.{{ env }}.qc"
API_TEST_NAME: "agr.{{ env }}.api.test"
LOADER_RUN_NAME: "agr.{{ env }}.loader"
PREPROCESS_RUN_NAME: "agr.{{ env }}.preprocess"
CACHER_RUN_NAME: "agr.{{ env }}.cacher"
INDEXER_RUN_NAME: "agr.{{ env }}.indexer"
VARIANT_INDEXER_RUN_NAME: "agr.{{ env }}.variant_indexer"
INTERMINE_DATA_EXTRACTOR_RUN_NAME: "agr.{{ env }}.data_extractor"
INTERMINE_BUILDER_RUN_NAME: "agr.{{ env }}.intermine_builder"
LOADER_TEST_NAME: "agr.{{ env }}.loader.test"
INDEXER_TEST_NAME: "agr.{{ env }}.indexer.test"
FILE_GENER_RUN_NAME: "agr.{{ env }}.filegenerator"
FILE_GENER_TEST_RUN_NAME: "agr.{{ env }}.filegenerator.test"

# Server Env DockerHub Paths
LOG_IMAGE_NAME: "docker.elastic.co/logstash/logstash:7.7.0"

# Complete Image names (REGISTRY/NAME:TAG used directly for pushing/pulling)
ES_ENV_IMAGE_NAME: "{{ REGISTRY }}/{{ ES_ENV_NAME }}:{{ DOCKER_IMAGE_TAG }}"
QC_RUN_IMAGE_NAME: "{{ REGISTRY }}/{{ QC_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"
KIBANA_IMAGE_NAME: "{{ REGISTRY }}/{{ KIBANA_ENV_NAME }}:{{ DOCKER_IMAGE_TAG }}"
NEO_ENV_IMAGE_NAME: "{{ REGISTRY }}/{{ NEO_ENV_NAME }}:{{ DOCKER_IMAGE_TAG }}"
LOADER_RUN_IMAGE_NAME: "{{ REGISTRY }}/{{ LOADER_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"
NEO_RELEASE_IMAGE_NAME: "{{ REGISTRY }}/{{ NEO_DATA_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"
VARIANT_RUN_IMAGE_NAME: "{{ REGISTRY }}/agr_variant_indexer:{{ ALLIANCE_RELEASE }}"
PREPROCESS_RUN_IMAGE_NAME: "{{ REGISTRY }}/{{ PREPROCESS_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"
INFINISPAN_ENV_IMAGE_NAME: "{{ REGISTRY }}/{{ INFINISPAN_ENV_NAME }}:{{ DOCKER_IMAGE_TAG }}"
CACHER_RELEASE_IMAGE_NAME: "{{ REGISTRY }}/{{ INFINISPAN_DATA_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"
FILE_GENER_RUN_IMAGE_NAME: "{{ REGISTRY }}/{{ FILEGENER_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"
JAVA_SOFTWARE_RUN_IMAGE_NAME: "{{ REGISTRY }}/{{ JAVA_SOFTWARE_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"
INTERMINE_BUILDER_RUN_IMAGE_NAME: "{{ REGISTRY }}/{{ INTERMINE_BUILDER_ENV_NAME }}:{{ DOCKER_IMAGE_TAG }}"

LOADER_TEST_RUN_IMAGE_NAME: "{{ REGISTRY }}/{{ LOADER_IMAGE_NAME }}:{{ env }}_loader"
API_TEST_IMAGE_NAME: "{{ REGISTRY }}/{{ JAVA_SOFTWARE_IMAGE_NAME }}:{{ env }}_api"
INDEXER_TEST_IMAGE_NAME: "{{ REGISTRY }}/{{ JAVA_SOFTWARE_IMAGE_NAME }}:{{ env }}_indexer"
FILE_GENER_TEST_RUN_IMAGE_NAME: "{{ REGISTRY }}/{{ FILEGENER_IMAGE_NAME }}:{{ env }}_filegen"

#Server Images
UI_SERVER_IMAGE_NAME: "{{ REGISTRY }}/{{ UI_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"
JBROWSE_SERVER_IMAGE_NAME: "{{ REGISTRY }}/{{ JBROWSE_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"
APOLLO_SERVER_IMAGE_NAME: "{{ REGISTRY }}/{{ APOLLO_IMAGE_NAME }}:{{ DOCKER_IMAGE_TAG }}"

INTERMINE_POSTGRES_SERVER_IMAGE_NAME: "{{ REGISTRY }}/{{ INTERMINE_POSTGRES_NAME }}:{{ DOCKER_IMAGE_TAG }}"
INTERMINE_SOLR_SERVER_IMAGE_NAME: "{{ REGISTRY }}/{{ INTERMINE_SOLR_NAME }}:{{ DOCKER_IMAGE_TAG }}"
INTERMINE_TOMCAT_SERVER_IMAGE_NAME: "{{ REGISTRY }}/{{ INTERMINE_TOMCAT_NAME }}:{{ DOCKER_IMAGE_TAG }}"

# Convinience names
CACHER_RUN_IMAGE_NAME: "{{ JAVA_SOFTWARE_RUN_IMAGE_NAME }}"
INDEXER_RUN_IMAGE_NAME: "{{ JAVA_SOFTWARE_RUN_IMAGE_NAME }}"
VARIANT_INDEXER_RUN_IMAGE_NAME: "{{ VARIANT_RUN_IMAGE_NAME }}"

# Config Options
NEO_VOLUME_NAME: "/data"
INTERMINE_DATA_VOLUME_NAME: "/data"
INFINISPAN_MEMORY: "31g"
INDEXER_MEMORY: "31g"
NEO_PAGE_CACHE: "31g"
NEO_MAX_HEAP: "31g"
CACHER_MEMORY: "31g"
ES_CLUSTER_MEMORY: "20g"
#ES_CLUSTER_SERVER_LIST: "{{ ES_SERVER_NAME }}01,{{ ES_SERVER_NAME }}02,{{ ES_SERVER_NAME }}03,{{ ES_SERVER_NAME }}04,{{ ES_SERVER_NAME }}05,{{ ES_SERVER_NAME }}06,{{ ES_SERVER_NAME }}07,{{ ES_SERVER_NAME }}08,{{ ES_SERVER_NAME }}09,{{ ES_SERVER_NAME }}10,{{ ES_SERVER_NAME }}11,{{ ES_SERVER_NAME }}12,{{ ES_SERVER_NAME }}13,{{ ES_SERVER_NAME }}14,{{ ES_SERVER_NAME }}15,{{ ES_SERVER_NAME }}16"
ES_CLUSTER_SERVER_LIST: "{{ ES_SERVER_NAME }}01,{{ ES_SERVER_NAME }}02,{{ ES_SERVER_NAME }}03,{{ ES_SERVER_NAME }}04,{{ ES_SERVER_NAME }}05,{{ ES_SERVER_NAME }}06,{{ ES_SERVER_NAME }}07,{{ ES_SERVER_NAME }}08"
